process PROD = 
{

   service = RandomNumberGeneratorService
   {
     PSet gun = {
       untracked uint32 initialSeed = 98765
     }
   untracked string saveFileName    = "SaveState.dat"
   }
   
   include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

# this will run single/multi particle pt-gun
# the pt of the particles with be uniformly
# distributed in the user-specied pt-range 
# particles (HepMCPRoduct) will be placed 
# into edm::Event 
    module gun = MultiParticleInConeGunProducer 
    { 
      untracked uint32 firstRun  =  1
      untracked PSet  PGunParameters =
      {
	 # you can request more than 1 particle
	 untracked vint32 PartID = {13} 
	 untracked double MinEta = -2.5
	 untracked double MaxEta = 2.5
	 #
	 # phi must be given in radians
	 #
	 untracked double MinPhi = -3.14159265358979323846
	 untracked double MaxPhi =  3.14159265358979323846
	 untracked double MinPt  =  9.99
	 untracked double MaxPt  = 100.01
	
	untracked vint32 InConeID = { 211 }
	untracked double MinDeltaR = 0.1
	untracked double MaxDeltaR = 0.2
	untracked double MinMomRatio = 0.99
	untracked double MaxMomRatio = 1.01

	untracked double InConeMinEta = -2.5
	untracked double InConeMaxEta = 2.5
	untracked double InConeMinPhi = -3.14159265358979323846
	untracked double InConeMaxPhi = 3.14159265358979323846
	untracked uint32 InConeMaxTry = 10
      }
      untracked int32 Verbosity = 1 # set to 1 (or greater)  for printouts
      untracked bool  AddAntiParticle = false   # if you turn it ON, for each particle
                                                # an anti-particle will be generated,
                                                # with 3-mom opposite to the particle's
    }
 
untracked PSet maxEvents = {untracked int32 input = 10 }

source = EmptySource {}
   
# you can write your particles (HepMCProduct) out into a ROOT file;
# if you want the i/o option, make sure you include it in the path 
#
    path p1 = {gun}
    module Out = PoolOutputModule { untracked string fileName = "test_ptgun.root" }    
    endpath p = { Out }

}
